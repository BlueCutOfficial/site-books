{"mappings":"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","sources":["js/utils/generics.js","node_modules/@parcel/runtime-js/lib/runtime-4aa00cfa344be310.js","node_modules/@parcel/runtime-js/lib/runtime-f485c3a376f312af.js","js/adr-book-info.js"],"sourcesContent":["/**\n * Get element by id\n * Elements that were already requested are registered in \"selectors\" array for performance\n */\nexport function select(id) {\n  if (!window.selectors) {\n    window.selectors = {}\n  }\n  let selector = window.selectors[id]\n  if (!selector) {\n    selector = document.getElementById(id)\n    window.selectors.id = selector\n  }\n  return selector\n}\n\n/**\n * Add or remove the class \"toggleClass\" on all given selectors\n */\nexport function toggleClass(selectors, toggleClass, isAdd) {\n  selectors.forEach((id) => {\n    if (isAdd) {\n      select(id).classList.add(toggleClass)\n    } else {\n      select(id).classList.remove(toggleClass)\n    }\n  })\n}\n\n/**\n * Return the part of the URL corresponding to location hash according to current values,\n * designed to work only when called on books page\n */\nexport function getURL() {\n  return `#${window.baseURL}?${window.sortingParam}`\n}","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"cQAoq\\\":\\\"index.de5dec44.js\\\",\\\"gbcXk\\\":\\\"style.695090bc.css\\\",\\\"hwmB9\\\":\\\"background.761bc37b.jpg\\\",\\\"d3YkH\\\":\\\"artwork-suzuha.09fac1ca.png\\\",\\\"aroW2\\\":\\\"artwork-ede.54057cad.png\\\",\\\"ilpGW\\\":\\\"cover-renaissance-s4-1024.6b8555ec.png\\\",\\\"6Vjqf\\\":\\\"artwork-statue-chateau-s4.d48a5537.png\\\",\\\"gR7QX\\\":\\\"artwork-lecture-s4.7439fb69.png\\\"}\"));","module.exports = require('./helpers/bundle-url').getBundleURL('cQAoq') + require('./helpers/bundle-manifest').resolve(\"gbcXk\");","import styleUrl from \"url:../styles/style.css\"\nimport { select } from './utils/generics';\n\nclass AdrBookInfo extends HTMLElement {\n\n  connectedCallback() {\n    if (this.slotsCount > 1) {\n      // Listen to click on navigation buttons\n      let previousButton = this.wrapper.querySelector(`#${this.getAttribute('id')}-previous`)\n      let nextButton = this.wrapper.querySelector(`#${this.getAttribute('id')}-next`)\n      previousButton.addEventListener('click', this.onPrevious)\n      nextButton.addEventListener('click', this.onNext)\n    }\n  }\n\n  disconnectedCallback() {\n    if (this.slotsCount > 1) {\n      let previousButton = this.wrapper.querySelector(`${this.getAttribute('id')}-previous`)\n      let nextButton = this.wrapper.querySelector(`${this.getAttribute('id')}-next`)\n      previousButton.removeEventListener('click', this.onPrevious)\n      nextButton.removeEventListener('click', this.onNext)\n    }\n  }\n\n  constructor() {\n    super()\n    // Get the slots count and set current slot to 1\n    this.slotsCount = Number(this.getAttribute('slots'))\n    this.currentSlot = 0\n    this.blocks = []\n\n    // Setup the wrapper\n    this.wrapper = document.createElement('div')\n    this.wrapper.classList.add('infobox')\n    this.wrapper.innerHTML = ''\n\n    // If there are several slots, append navigation keys\n    if (this.slotsCount > 1) {\n      this.wrapper.innerHTML += `\n        <div class=\"centered\">\n          <button\n            id=\"${this.getAttribute('id')}-previous\"\n            wrapper=\"${this.getAttribute('id')}\"\n            class=\"pure-button pure-button--black\"\n            type=\"button\"><</button>\n          <button\n            id=\"${this.getAttribute('id')}-next\"\n            wrapper=\"${this.getAttribute('id')}\"\n            class=\"pure-button pure-button--black\"\n            type=\"button\">></button>\n        </div>\n      `\n    }\n\n    // Append the right slots count\n    for(let i = 0; i < this.slotsCount; i++) {\n      this.wrapper.innerHTML += `\n        <slot name=\"slot-${i}\"></slot>\n      `\n    }\n\n    var shadow = this.attachShadow({mode: 'closed'})\n    shadow.innerHTML = `\n      <link rel=\"stylesheet\" href=\"https://unpkg.com/purecss@1.0.0/build/pure-min.css\">\n      <link rel=\"stylesheet\" type=\"text/css\" href=\"${styleUrl}\">\n    `\n    shadow.appendChild(this.wrapper)\n  }\n\n  // Context is not bound, we can't use \"this\"\n  onPrevious(event) {\n    // Get the required props\n    let wrapperId = event.target.getAttribute('wrapper')\n    let wrapper = select(wrapperId)\n    let slotsCount = Number(wrapper.getAttribute('slots'))\n    let currentSlot = Number(wrapper.getAttribute('current'))\n    // Hide the current slot\n    select(`${wrapperId}-${currentSlot}`).classList.remove('show-from-left')\n    select(`${wrapperId}-${currentSlot}`).classList.remove('show-from-right')\n    select(`${wrapperId}-${currentSlot}`).classList.add('hidden')\n    // Compute the new current slot and do the changes\n    currentSlot = (currentSlot <= 0) ? slotsCount - 1 : currentSlot - 1\n    select(`${wrapperId}-${currentSlot}`).classList.remove('hidden')\n    select(`${wrapperId}-${currentSlot}`).classList.add('show-from-left')\n    wrapper.setAttribute('current', currentSlot)\n  }\n\n  // Context is not bound, we can't use \"this\"\n  onNext(event) {\n    // Get the required props\n    let wrapperId = event.target.getAttribute('wrapper')\n    let wrapper = select(wrapperId)\n    let slotsCount = Number(wrapper.getAttribute('slots'))\n    let currentSlot = Number(wrapper.getAttribute('current'))\n    // Hide the current slot\n    select(`${wrapperId}-${currentSlot}`).classList.remove('show-from-left')\n    select(`${wrapperId}-${currentSlot}`).classList.remove('show-from-right')\n    select(`${wrapperId}-${currentSlot}`).classList.add('hidden')\n    // Compute the new current slot and do the changes\n    let plusOne = currentSlot + 1\n    currentSlot = (plusOne >= slotsCount) ? 0 : plusOne\n    select(`${wrapperId}-${currentSlot}`).classList.remove('hidden')\n    select(`${wrapperId}-${currentSlot}`).classList.add('show-from-right')\n    wrapper.setAttribute('current', currentSlot)\n  }\n}\n\ncustomElements.define('adr-book-info', AdrBookInfo)"],"names":["$e8b57a6fb9383744$export$2e6c959c16ff56b8","id","window","selectors","selector","document","getElementById","$e8b57a6fb9383744$export$4a80062ca50b57c7","isAdd","forEach","classList","add","remove","$e8b57a6fb9383744$export$152462a4e1ffe278","concat","baseURL","sortingParam","parcelRequire","register","JSON","parse","$4e181805bfd9fb1e$exports","getBundleURL","resolve","$1e123ab7f04d2be7$var$AdrBookInfo","HTMLElement","slotsCount","Number","_this","getAttribute","currentSlot","blocks","wrapper","createElement","innerHTML","i","shadow","attachShadow","mode","$parcel$interopDefault","appendChild","key","this","previousButton","querySelector","nextButton","addEventListener","onPrevious","onNext","removeEventListener","event","wrapperId","target","$jYHEd","select","setAttribute","plusOne","customElements","define"],"version":3,"file":"index.de5dec44.js.map"}