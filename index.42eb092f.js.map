{"mappings":"iiBAAAA,EAAA,SAAAC,SAAsCC,KAAKC,MAAK,oHCAhDC,EAAiBJ,EAAA,SAAAK,eAAyCL,EAAA,QAAA,CAA0B,QAAQ,aCMtFM,EAAa,SAAAC,yBAAbD,gCAAAA,wDAAAA,GAAaE,KAAAC,QAqDVC,QAAUC,SAASC,cAAa,SAChCF,QAAQG,UAAUC,IAAG,iBAErBC,YAAW,EAEZC,GAAE,SACFC,YAAW,SACXC,QAAOC,EAAOC,eAAc,eAG5BJ,GAAE,MACFC,YAAW,uBACXC,QAAOC,EAAOC,eAAc,6BAG5BJ,GAAE,MACFC,YAAW,kBACXC,QAAOC,EAAOC,eAAc,0BAI3BL,YAAYM,SAAO,SAAEC,KACnBZ,QAAQa,YAAYD,EAASJ,gBAGhCM,EAAML,EAAQM,aAAY,CAAEC,KAAI,kBACpCF,EAAOG,UAAS,iJAE0CC,OAATC,EAAAzB,GAAQ,YAEzDoB,EAAOD,YAAWJ,EAAMT,6BAnFtBJ,EAAaC,iBAAbD,EAAa,EAMjBwB,IAAwB,0CAACC,EAAGC,EAAIC,OAC1BC,EAAQhC,KAAKC,MAAM8B,GACnBE,EAAO,GAENC,GAAgB,EAAhBC,GAAgB,EAAhBC,OAAgBC,cAAhBC,EAAAC,EAAoBC,OAAOC,QAAQT,GAAKU,OAAAC,cAAxCT,GAAAI,EAAAC,EAAgBK,QAAAC,MAAhBX,GAAgB,EAAA,uBAAhBI,EAAgBQ,MAAA,GAAXlB,EAAGmB,EAAA,GAAED,EAAKC,EAAA,GAClBd,EAAQe,KAAI,CACVlC,GAAIc,EACJkB,MAAAA,cAHCX,GAAgB,EAAhBC,EAAgBa,cAAhBf,GAAgB,MAAhBK,EAAgBW,QAAhBX,EAAgBW,oBAAhBf,QAAAC,GAOLH,EAAUA,EAAQkB,MAAI,SAAEC,EAAGC,UAAMA,EAAEP,MAAQM,EAAEN,cAGxCjC,YAAYM,QAAO,SAAEC,OACpBkC,EAAO/C,KAAQgD,aAAatB,EAASb,EAASN,IAC9C0C,EA1BK,aA2BFF,EAAQG,eACR,EACHD,EA5BK,kBA8BF,EACHA,EA9BK,QAiCTpC,EAASJ,QAAQ0C,MAAK,cAAiBF,EACvCpC,EAASJ,QAAQS,UAAS,GAAuBC,OAAjB4B,EAAQK,KAAI,MAA0BjC,OAArBN,EAASL,6BAK9Da,IAAY,8BAACK,EAAS2B,OAEhBC,EAAa5B,EAAQ6B,MAAI,SAAAC,UAAMA,EAAFjD,KAAgB8C,KAE7CI,EAAiB/B,EAAQ6B,MAAI,SAAAC,OAAIjB,EAAKiB,EAALjB,aAAYe,EAAWf,QAAUA,YAIpEa,KAAM1B,EAAQgC,QAAQD,GAAkB,EAExCP,SAAUxB,EAAQgC,QAAQJ,GAAc,MAuC5CjC,IAAc,gCAACH,OACTL,EAAWX,SAASC,cAAa,YACrCU,EAAST,UAAUC,IAAG,eACtBQ,EAASK,UAAYA,EACdL,OAxFEQ,IAAkB,wDAFzBxB,EAAa,mBAAS8D,cA8F5BC,eAAeC,OAAM,kBAAoBhE","sources":["node_modules/@parcel/runtime-js/lib/runtime-68d2c7f4ea544add.js","node_modules/@parcel/runtime-js/lib/runtime-1d9353e1f5c0de96.js","js/adr-result-list.js"],"sourcesContent":["require('./bundle-manifest').register(JSON.parse(\"{\\\"bOtt6\\\":\\\"index.42eb092f.js\\\",\\\"llCf6\\\":\\\"style.45ee1b85.css\\\"}\"));","module.exports = require('./bundle-url').getBundleURL() + require('./relative-path')(\"bOtt6\", \"llCf6\")","import styleUrl from \"url:../styles/style.css\";\n\nconst position1 = '0px'\nconst position2 = '50px'\nconst position3 = '100px'\n\nclass AdrResultList extends HTMLElement {\n\n  static get observedAttributes() {\n    return ['score']\n  }\n\n  attributeChangedCallback(_, __, newValue) {\n    let score = JSON.parse(newValue)\n    let results = []\n    // We need to transform the score dictionary into an array...\n    for (let [key, value] of Object.entries(score)) {\n      results.push({\n        id: key,\n        value\n      })\n    }\n    // ...in order to sort this array by score\n    results = results.sort((a, b) => b.value - a.value)\n\n    // Then for each book, apply margin-top depending on its index in results\n    this.bookListing.forEach((bookItem) => {\n      let ranking = this.bookPosition(results, bookItem.id)\n      let marginValue = position1 \n      switch(ranking.position) {\n        case 2:\n          marginValue = position2\n          break;\n        case 3:\n          marginValue = position3\n          break\n      }\n      bookItem.element.style['margin-top'] = marginValue\n      bookItem.element.innerHTML = `${ranking.rank}. ${bookItem.initialHTML}`\n    })\n    \n  }\n\n  bookPosition(results, bookId) {\n    // Find the first (and only) element corresponding to the bookId in the results array\n    let resultItem = results.find(({ id }) => id === bookId)\n    // Find the first element with the same score as the found book\n    let firstScoreItem = results.find(({ value }) => resultItem.value === value)\n    // Then return the index of this element + 1 to get its position\n    return {\n      // The rank is the actual rank related to the score\n      rank: results.indexOf(firstScoreItem) + 1,\n      // The position id for the display order of the boxes\n      position: results.indexOf(resultItem) + 1\n    }\n  }\n\n  constructor() {\n    super()\n    this.wrapper = document.createElement('div')\n    this.wrapper.classList.add('result-list')\n\n    this.bookListing = [\n      { \n        id: 'suzuha', \n        initialHTML: 'Suzuha',\n        element: this.createBookItem('1. Suzuha')\n      },\n      { \n        id: 'ede', \n        initialHTML: 'L\\'Enfant des Esprits',\n        element: this.createBookItem('2. L\\'Enfant des Esprits') \n      },\n      { \n        id: 'vdy',\n        initialHTML: 'Le Voeu de Yoko',\n        element: this.createBookItem('3. Le Voeu de Yoko')\n      }\n    ]\n\n    this.bookListing.forEach((bookItem) => {\n      this.wrapper.appendChild(bookItem.element)\n    })\n\n    var shadow = this.attachShadow({mode: 'closed'})\n    shadow.innerHTML = `\n      <link rel=\"stylesheet\" href=\"https://unpkg.com/purecss@1.0.0/build/pure-min.css\">\n      <link rel=\"stylesheet\" type=\"text/css\" href=\"${styleUrl}\">\n    `\n    shadow.appendChild(this.wrapper)\n  }\n\n  createBookItem(innerHTML) {\n    let bookItem = document.createElement('p')\n    bookItem.classList.add('result-item')\n    bookItem.innerHTML = innerHTML\n    return bookItem\n  }\n}\n\ncustomElements.define('adr-result-list', AdrResultList)"],"names":["parcelRequire","register","JSON","parse","$a68688bae7291443$exports","getBundleURL","$8151fc6e4bada5f9$var$AdrResultList","HTMLElement1","call","this","wrapper","document","createElement","classList","add","bookListing","id","initialHTML","element","_this","createBookItem","forEach","bookItem","appendChild","shadow","attachShadow","mode","innerHTML","concat","$parcel$interopDefault","key","_","__","newValue","score","results","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Object","entries","Symbol","iterator","next","done","value","_value","push","err","return","sort","a","b","ranking","bookPosition","marginValue","position","style","rank","bookId","resultItem","find","param","firstScoreItem","indexOf","HTMLElement","customElements","define"],"version":3,"file":"index.42eb092f.js.map"}