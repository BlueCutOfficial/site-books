{"mappings":"wiBAAAA,EAAiBC,EAAA,SAAAC,eAAoC,0CCM/CC,EAAa,SAAAC,YAAbD,gCAAAA,wDAAAA,GAAaE,KAAAC,QAqDVC,QAAUC,SAASC,cAAa,SAChCF,QAAQG,UAAUC,IAAG,iBAErBC,YAAW,EAEZC,GAAE,SACFC,YAAW,SACXC,QAAOC,EAAOC,eAAc,eAG5BJ,GAAE,MACFC,YAAW,uBACXC,QAAOC,EAAOC,eAAc,6BAG5BJ,GAAE,MACFC,YAAW,kBACXC,QAAOC,EAAOC,eAAc,0BAI3BL,YAAYM,SAAO,SAAEC,KACnBZ,QAAQa,YAAYD,EAASJ,gBAGhCM,EAAML,EAAQM,aAAY,CAAEC,KAAI,kBACpCF,EAAOG,UAAS,iJAE0CC,OAATC,EAAA1B,GAAQ,YAEzDqB,EAAOD,YAAWJ,EAAMT,6BAnFtBJ,EAAaC,iBAAbD,EAAa,EAMjBwB,IAAwB,0CAACC,EAAGC,EAAIC,OAC1BC,EAAQC,KAAKC,MAAMH,GACnBI,EAAO,GAENC,GAAgB,EAAhBC,GAAgB,EAAhBC,OAAgBC,cAAhBC,EAAAC,EAAoBC,OAAOC,QAAQX,GAAKY,OAAAC,cAAxCT,GAAAI,EAAAC,EAAgBK,QAAAC,MAAhBX,GAAgB,EAAA,uBAAhBI,EAAgBQ,MAAA,GAAXpB,EAAGqB,EAAA,GAAED,EAAKC,EAAA,GAClBd,EAAQe,KAAI,CACVpC,GAAIc,EACJoB,MAAAA,cAHCX,GAAgB,EAAhBC,EAAgBa,cAAhBf,GAAgB,MAAhBK,EAAgBW,QAAhBX,EAAgBW,oBAAhBf,QAAAC,GAOLH,EAAUA,EAAQkB,MAAI,SAAEC,EAAGC,UAAMA,EAAEP,MAAQM,EAAEN,cAGxCnC,YAAYM,QAAO,SAAEC,OACpBoC,EAAOjD,KAAQkD,aAAatB,EAASf,EAASN,IAC9C4C,EA1BK,aA2BFF,EAAQG,eACR,EACHD,EA5BK,kBA8BF,EACHA,EA9BK,QAiCTtC,EAASJ,QAAQ4C,MAAK,cAAiBF,EACvCtC,EAASJ,QAAQS,UAAS,GAAuBC,OAAjB8B,EAAQK,KAAI,MAA0BnC,OAArBN,EAASL,6BAK9Da,IAAY,8BAACO,EAAS2B,OAEhBC,EAAa5B,EAAQ6B,MAAI,SAAAC,UAAMA,EAAFnD,KAAgBgD,KAE7CI,EAAiB/B,EAAQ6B,MAAI,SAAAC,OAAIjB,EAAKiB,EAALjB,aAAYe,EAAWf,QAAUA,YAIpEa,KAAM1B,EAAQgC,QAAQD,GAAkB,EAExCP,SAAUxB,EAAQgC,QAAQJ,GAAc,MAuC5CnC,IAAc,gCAACH,OACTL,EAAWX,SAASC,cAAa,YACrCU,EAAST,UAAUC,IAAG,eACtBQ,EAASK,UAAYA,EACdL,OAxFEQ,IAAkB,wDAFzBxB,EAAa,mBAASgE,cA8F5BC,eAAeC,OAAM,kBAAoBlE","sources":["node_modules/@parcel/runtime-js/lib/runtime-bb90c3467927a23f.js","js/adr-result-list.js"],"sourcesContent":["module.exports = require('./bundle-url').getBundleURL() + \"style.9595e6cf.css\"","import styleUrl from \"url:../styles/style.css\";\r\n\r\nconst position1 = '0px'\r\nconst position2 = '50px'\r\nconst position3 = '100px'\r\n\r\nclass AdrResultList extends HTMLElement {\r\n\r\n  static get observedAttributes() {\r\n    return ['score']\r\n  }\r\n\r\n  attributeChangedCallback(_, __, newValue) {\r\n    let score = JSON.parse(newValue)\r\n    let results = []\r\n    // We need to transform the score dictionary into an array...\r\n    for (let [key, value] of Object.entries(score)) {\r\n      results.push({\r\n        id: key,\r\n        value\r\n      })\r\n    }\r\n    // ...in order to sort this array by score\r\n    results = results.sort((a, b) => b.value - a.value)\r\n\r\n    // Then for each book, apply margin-top depending on its index in results\r\n    this.bookListing.forEach((bookItem) => {\r\n      let ranking = this.bookPosition(results, bookItem.id)\r\n      let marginValue = position1 \r\n      switch(ranking.position) {\r\n        case 2:\r\n          marginValue = position2\r\n          break;\r\n        case 3:\r\n          marginValue = position3\r\n          break\r\n      }\r\n      bookItem.element.style['margin-top'] = marginValue\r\n      bookItem.element.innerHTML = `${ranking.rank}. ${bookItem.initialHTML}`\r\n    })\r\n    \r\n  }\r\n\r\n  bookPosition(results, bookId) {\r\n    // Find the first (and only) element corresponding to the bookId in the results array\r\n    let resultItem = results.find(({ id }) => id === bookId)\r\n    // Find the first element with the same score as the found book\r\n    let firstScoreItem = results.find(({ value }) => resultItem.value === value)\r\n    // Then return the index of this element + 1 to get its position\r\n    return {\r\n      // The rank is the actual rank related to the score\r\n      rank: results.indexOf(firstScoreItem) + 1,\r\n      // The position id for the display order of the boxes\r\n      position: results.indexOf(resultItem) + 1\r\n    }\r\n  }\r\n\r\n  constructor() {\r\n    super()\r\n    this.wrapper = document.createElement('div')\r\n    this.wrapper.classList.add('result-list')\r\n\r\n    this.bookListing = [\r\n      { \r\n        id: 'suzuha', \r\n        initialHTML: 'Suzuha',\r\n        element: this.createBookItem('1. Suzuha')\r\n      },\r\n      { \r\n        id: 'ede', \r\n        initialHTML: 'L\\'Enfant des Esprits',\r\n        element: this.createBookItem('2. L\\'Enfant des Esprits') \r\n      },\r\n      { \r\n        id: 'vdy',\r\n        initialHTML: 'Le Voeu de Yoko',\r\n        element: this.createBookItem('3. Le Voeu de Yoko')\r\n      }\r\n    ]\r\n\r\n    this.bookListing.forEach((bookItem) => {\r\n      this.wrapper.appendChild(bookItem.element)\r\n    })\r\n\r\n    var shadow = this.attachShadow({mode: 'closed'})\r\n    shadow.innerHTML = `\r\n      <link rel=\"stylesheet\" href=\"https://unpkg.com/purecss@1.0.0/build/pure-min.css\">\r\n      <link rel=\"stylesheet\" type=\"text/css\" href=\"${styleUrl}\">\r\n    `\r\n    shadow.appendChild(this.wrapper)\r\n  }\r\n\r\n  createBookItem(innerHTML) {\r\n    let bookItem = document.createElement('p')\r\n    bookItem.classList.add('result-item')\r\n    bookItem.innerHTML = innerHTML\r\n    return bookItem\r\n  }\r\n}\r\n\r\ncustomElements.define('adr-result-list', AdrResultList)"],"names":["$51bfbc0a03b8d2d7$exports","parcelRequire","getBundleURL","$de7dd87d13fdf0c5$var$AdrResultList","HTMLElement1","call","this","wrapper","document","createElement","classList","add","bookListing","id","initialHTML","element","_this","createBookItem","forEach","bookItem","appendChild","shadow","attachShadow","mode","innerHTML","concat","$parcel$interopDefault","key","_","__","newValue","score","JSON","parse","results","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Object","entries","Symbol","iterator","next","done","value","_value","push","err","return","sort","a","b","ranking","bookPosition","marginValue","position","style","rank","bookId","resultItem","find","param","firstScoreItem","indexOf","HTMLElement","customElements","define"],"version":3,"file":"index.e734ff6f.js.map"}