{"mappings":"qhBAAAA,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,8b,MCAzDC,EAAc,IAAAC,IAAuBL,EAAA,SAAAM,QAA6C,SAAOC,OAAAC,KAAAC,KAAGC,W,MCMtFC,UAAsBC,YAEfC,gCACT,MAAO,CAAC,QACV,CAEAC,yBAAyBC,EAAGC,EAAIC,GAC9B,IAAIC,EAAQhB,KAAKC,MAAMc,GACnBE,EAAU,GAEd,IAAK,IAAKC,EAAKC,KAAUC,OAAOC,QAAQL,GACtCC,EAAQK,KAAK,CACXC,GAAIL,E,MACJC,IAIJF,EAAUA,EAAQO,MAAI,CAAEC,EAAGC,IAAMA,EAAEP,MAAQM,EAAEN,QAG7CQ,KAAKC,YAAYC,SAASC,IACxB,IAAIC,EAAUJ,KAAKK,aAAaf,EAASa,EAASP,IAC9CU,EA1BQ,MA2BZ,OAAOF,EAAQG,UACb,KAAK,EACHD,EA5BQ,OA6BR,MACF,KAAK,EACHA,EA9BQ,QAiCZH,EAASK,QAAQC,MAAM,cAAgBH,EACvCH,EAASK,QAAQE,UAAS,GAAMN,EAAQO,SAASR,EAASS,aAAW,GAGzE,CAEAP,aAAaf,EAASuB,GAEpB,IAAIC,EAAaxB,EAAQyB,MAAI,EAAGnB,GAACA,KAASA,IAAOiB,IAE7CG,EAAiB1B,EAAQyB,MAAI,EAAGvB,MAACA,KAAYsB,EAAWtB,QAAUA,IAEtE,MAAO,CAELmB,KAAMrB,EAAQ2B,QAAQD,GAAkB,EAExCT,SAAUjB,EAAQ2B,QAAQH,GAAc,EAE5C,CAqCAI,eAAeR,GACb,IAAIP,EAAWgB,SAASC,cAAc,KAGtC,OAFAjB,EAASkB,UAAUC,IAAI,eACvBnB,EAASO,UAAYA,EACdP,CACT,C,cAvCEoB,QACAvB,KAAKwB,QAAUL,SAASC,cAAc,OACtCpB,KAAKwB,QAAQH,UAAUC,IAAI,eAE3BtB,KAAKC,YAAc,CACjB,CACEL,GAAI,SACJgB,YAAa,SACbJ,QAASR,KAAKkB,eAAe,cAE/B,CACEtB,GAAI,MACJgB,YAAa,uBACbJ,QAASR,KAAKkB,eAAe,4BAE/B,CACEtB,GAAI,MACJgB,YAAa,kBACbJ,QAASR,KAAKkB,eAAe,wBAIjClB,KAAKC,YAAYC,SAASC,IACxBH,KAAKwB,QAAQC,YAAYtB,EAASK,QAAO,IAG3C,IAAIkB,EAAS1B,KAAK2B,aAAa,CAACC,KAAM,WACtCF,EAAOhB,UAAS,iJAEiCmB,EAAAtD,aAEjDmD,EAAOD,YAAYzB,KAAKwB,QAC1B,EAUFM,eAAeC,OAAO,kBAAmBjD","sources":["node_modules/@parcel/runtime-js/lib/runtime-8d9fcc1c8e1d5873.js","node_modules/@parcel/runtime-js/lib/runtime-c0665e2809cfadba.js","js/adr-result-list.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"fMMq7\\\":\\\"index.f1c3972c.js\\\",\\\"gbcXk\\\":\\\"style.fa563be8.css\\\",\\\"hwmB9\\\":\\\"background.761bc37b.jpg\\\",\\\"cx3w5\\\":\\\"artwork-suzuha.583b2d51.jpg\\\",\\\"aroW2\\\":\\\"artwork-ede.54057cad.png\\\",\\\"ilpGW\\\":\\\"cover-renaissance-s4-1024.6b8555ec.png\\\",\\\"6Vjqf\\\":\\\"artwork-statue-chateau-s4.d48a5537.png\\\",\\\"gR7QX\\\":\\\"artwork-lecture-s4.7439fb69.png\\\"}\"));","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"gbcXk\")).toString();","import styleUrl from \"url:../styles/style.css\";\n\nconst position1 = '0px'\nconst position2 = '50px'\nconst position3 = '100px'\n\nclass AdrResultList extends HTMLElement {\n\n  static get observedAttributes() {\n    return ['score']\n  }\n\n  attributeChangedCallback(_, __, newValue) {\n    let score = JSON.parse(newValue)\n    let results = []\n    // We need to transform the score dictionary into an array...\n    for (let [key, value] of Object.entries(score)) {\n      results.push({\n        id: key,\n        value\n      })\n    }\n    // ...in order to sort this array by score\n    results = results.sort((a, b) => b.value - a.value)\n\n    // Then for each book, apply margin-top depending on its index in results\n    this.bookListing.forEach((bookItem) => {\n      let ranking = this.bookPosition(results, bookItem.id)\n      let marginValue = position1 \n      switch(ranking.position) {\n        case 2:\n          marginValue = position2\n          break;\n        case 3:\n          marginValue = position3\n          break\n      }\n      bookItem.element.style['margin-top'] = marginValue\n      bookItem.element.innerHTML = `${ranking.rank}. ${bookItem.initialHTML}`\n    })\n    \n  }\n\n  bookPosition(results, bookId) {\n    // Find the first (and only) element corresponding to the bookId in the results array\n    let resultItem = results.find(({ id }) => id === bookId)\n    // Find the first element with the same score as the found book\n    let firstScoreItem = results.find(({ value }) => resultItem.value === value)\n    // Then return the index of this element + 1 to get its position\n    return {\n      // The rank is the actual rank related to the score\n      rank: results.indexOf(firstScoreItem) + 1,\n      // The position id for the display order of the boxes\n      position: results.indexOf(resultItem) + 1\n    }\n  }\n\n  constructor() {\n    super()\n    this.wrapper = document.createElement('div')\n    this.wrapper.classList.add('result-list')\n\n    this.bookListing = [\n      { \n        id: 'suzuha', \n        initialHTML: 'Suzuha',\n        element: this.createBookItem('1. Suzuha')\n      },\n      { \n        id: 'ede', \n        initialHTML: 'L\\'Enfant des Esprits',\n        element: this.createBookItem('2. L\\'Enfant des Esprits') \n      },\n      { \n        id: 'vdy',\n        initialHTML: 'Le Voeu de Yoko',\n        element: this.createBookItem('3. Le Voeu de Yoko')\n      }\n    ]\n\n    this.bookListing.forEach((bookItem) => {\n      this.wrapper.appendChild(bookItem.element)\n    })\n\n    var shadow = this.attachShadow({mode: 'closed'})\n    shadow.innerHTML = `\n      <link rel=\"stylesheet\" href=\"https://unpkg.com/purecss@1.0.0/build/pure-min.css\">\n      <link rel=\"stylesheet\" type=\"text/css\" href=\"${styleUrl}\">\n    `\n    shadow.appendChild(this.wrapper)\n  }\n\n  createBookItem(innerHTML) {\n    let bookItem = document.createElement('p')\n    bookItem.classList.add('result-item')\n    bookItem.innerHTML = innerHTML\n    return bookItem\n  }\n}\n\ncustomElements.define('adr-result-list', AdrResultList)"],"names":["parcelRequire","register","JSON","parse","$7c2b628dc2e2d7cd$exports","URL","resolve","import","meta","url","toString","$0d8c9b79c9db4877$var$AdrResultList","HTMLElement","observedAttributes","attributeChangedCallback","_","__","newValue","score","results","key","value","Object","entries","push","id","sort","a","b","this","bookListing","forEach","bookItem","ranking","bookPosition","marginValue","position","element","style","innerHTML","rank","initialHTML","bookId","resultItem","find","firstScoreItem","indexOf","createBookItem","document","createElement","classList","add","super","wrapper","appendChild","shadow","attachShadow","mode","$parcel$interopDefault","customElements","define"],"version":3,"file":"index.f1c3972c.js.map"}